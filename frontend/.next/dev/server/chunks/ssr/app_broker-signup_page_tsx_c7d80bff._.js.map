{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/Quaantisc/Rentify/frontend/app/broker-signup/page.tsx"],"sourcesContent":["// \"use client\";\r\n\r\n// import { useState } from \"react\";\r\n// import { useAuthContext } from \"../context/AuthContext\";\r\n\r\n// export default function Signup() {\r\n//   const [name, setName] = useState(\"\");\r\n//   const [phoneNumber, setPhoneNumber] = useState(\"\");\r\n//   const [otp, setOtp] = useState(\"\");\r\n//   const [step, setStep] = useState<\"signup\" | \"verify\">(\"signup\");\r\n//   const { login } = useAuthContext();\r\n\r\n//   const baseUrl = process.env.NEXT_PUBLIC_BASE_URL || \"http://localhost:7000\";\r\n\r\n//   const handleSignup = async () => {\r\n//     const res = await fetch(`${baseUrl}/api/brokers/signup`, {\r\n//       method: \"POST\",\r\n//       headers: { \"Content-Type\": \"application/json\" },\r\n//       body: JSON.stringify({ name, phoneNumber }),\r\n//     });\r\n//     const data = await res.json();\r\n//     if (res.ok) setStep(\"verify\");\r\n//     else alert(data.message);\r\n//   };\r\n\r\n//   const handleVerifyOtp = async () => {\r\n//     const res = await fetch(`${baseUrl}/api/brokers/verifyOtp`, {\r\n//       method: \"POST\",\r\n//       headers: { \"Content-Type\": \"application/json\" },\r\n//       body: JSON.stringify({ phoneNumber, otp }),\r\n//     });\r\n//     const data = await res.json();\r\n//     if (res.ok) {\r\n//       // Save token in context\r\n//       login(\"demo-token\", { _id: \"demo\", name, phoneNumber }); // replace with real token & broker from API\r\n//     } else alert(data.message);\r\n//   };\r\n\r\n//   return (\r\n//     <div className=\"p-8 max-w-md mx-auto\">\r\n//       {step === \"signup\" ? (\r\n//         <>\r\n//           <h2 className=\"text-2xl font-bold mb-4\">Broker Signup</h2>\r\n//           <input placeholder=\"Name\" value={name} onChange={e => setName(e.target.value)} className=\"border p-2 w-full mb-2\"/>\r\n//           <input placeholder=\"Phone +91...\" value={phoneNumber} onChange={e => setPhoneNumber(e.target.value)} className=\"border p-2 w-full mb-2\"/>\r\n//           <button onClick={handleSignup} className=\"bg-blue-500 text-white p-2 w-full\">Send OTP</button>\r\n//         </>\r\n//       ) : (\r\n//         <>\r\n//           <h2 className=\"text-2xl font-bold mb-4\">Verify OTP</h2>\r\n//           <input placeholder=\"OTP\" value={otp} onChange={e => setOtp(e.target.value)} className=\"border p-2 w-full mb-2\"/>\r\n//           <button onClick={handleVerifyOtp} className=\"bg-green-500 text-white p-2 w-full\">Verify & Login</button>\r\n//         </>\r\n//       )}\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n\r\n\r\n\"use client\";\r\n\r\nimport { useState } from \"react\";\r\n\r\nexport default function BrokerSignup() {\r\n  const [name, setName] = useState(\"\");\r\n  const [phoneNumber, setPhoneNumber] = useState(\"\"); // only 10 digits entered by user\r\n  const [serviceAreas, setServiceAreas] = useState<string[]>([\"\"]);\r\n  const [availableFlatTypes, setAvailableFlatTypes] = useState<string[]>([\"\"]);\r\n  const [address, setAddress] = useState(\"\");\r\n  const [message, setMessage] = useState(\"\");\r\n\r\n  const baseUrl = process.env.NEXT_PUBLIC_BASE_URL || \"http://localhost:7000\";\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n\r\n    // Phone validation\r\n    const phone = phoneNumber.replace(/\\D/g, \"\"); // remove non-digits\r\n    if (phone.length !== 10) {\r\n      setMessage(\"Phone number must be exactly 10 digits\");\r\n      return;\r\n    }\r\n\r\n    const payload = {\r\n      name,\r\n      phoneNumber: \"+91\" + phone, // keep +91 fixed\r\n      serviceAreas: serviceAreas.filter(s => s.trim() !== \"\"),\r\n      availableFlatTypes: availableFlatTypes.filter(f => f.trim() !== \"\"),\r\n      address,\r\n    };\r\n\r\n    try {\r\n      const res = await fetch(`${baseUrl}/api/brokers/signup`, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify(payload),\r\n      });\r\n      const data = await res.json();\r\n\r\n      if (res.ok) {\r\n        setMessage(\"Broker signed up successfully!\");\r\n        setName(\"\");\r\n        setPhoneNumber(\"\");\r\n        setServiceAreas([\"\"]);\r\n        setAvailableFlatTypes([\"\"]);\r\n        setAddress(\"\");\r\n      } else {\r\n        setMessage(data.message || \"Signup failed\");\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      setMessage(\"Server error. Please try again.\");\r\n    }\r\n  };\r\n\r\n  const handleServiceAreaChange = (index: number, value: string) => {\r\n    const updated = [...serviceAreas];\r\n    updated[index] = value;\r\n    setServiceAreas(updated);\r\n  };\r\n\r\n  const handleFlatTypeChange = (index: number, value: string) => {\r\n    const updated = [...availableFlatTypes];\r\n    updated[index] = value;\r\n    setAvailableFlatTypes(updated);\r\n  };\r\n\r\n  const addServiceArea = () => setServiceAreas([...serviceAreas, \"\"]);\r\n  const addFlatType = () => setAvailableFlatTypes([...availableFlatTypes, \"\"]);\r\n\r\n  return (\r\n    <div className=\"max-w-md mx-auto p-6 border rounded-lg shadow-lg text-black bg-background\">\r\n      <h2 className=\"text-2xl font-bold mb-4\">Broker Signup</h2>\r\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n        <input\r\n          placeholder=\"Name\"\r\n          value={name}\r\n          onChange={e => setName(e.target.value)}\r\n          className=\"border p-2 w-full\"\r\n          required\r\n        />\r\n\r\n        <div className=\"flex\">\r\n          <span className=\"bg-gray-200 border p-2\">+91</span>\r\n          <input\r\n            placeholder=\"Phone number (10 digits)\"\r\n            value={phoneNumber}\r\n            onChange={e => setPhoneNumber(e.target.value)}\r\n            className=\"border p-2 w-full\"\r\n            required\r\n            maxLength={10}\r\n          />\r\n        </div>\r\n\r\n        <div>\r\n          <label className=\"block mb-1 font-semibold\">Service Areas</label>\r\n          {serviceAreas.map((area, i) => (\r\n            <input\r\n              key={i}\r\n              value={area}\r\n              onChange={e => handleServiceAreaChange(i, e.target.value)}\r\n              className=\"border p-2 w-full mb-1\"\r\n              placeholder={`Service Area ${i + 1}`}\r\n            />\r\n          ))}\r\n          <button type=\"button\" onClick={addServiceArea} className=\"text-blue-500 mt-1\">\r\n            + Add Service Area\r\n          </button>\r\n        </div>\r\n\r\n        <div>\r\n          <label className=\"block mb-1 font-semibold\">Available Flat Types</label>\r\n          {availableFlatTypes.map((flat, i) => (\r\n            <input\r\n              key={i}\r\n              value={flat}\r\n              onChange={e => handleFlatTypeChange(i, e.target.value)}\r\n              className=\"border p-2 w-full mb-1\"\r\n              placeholder={`Flat Type ${i + 1}`}\r\n            />\r\n          ))}\r\n          <button type=\"button\" onClick={addFlatType} className=\"text-blue-500 mt-1\">\r\n            + Add Flat Type\r\n          </button>\r\n        </div>\r\n\r\n        <textarea\r\n          placeholder=\"Address\"\r\n          value={address}\r\n          onChange={e => setAddress(e.target.value)}\r\n          className=\"border p-2 w-full\"\r\n          rows={3}\r\n        />\r\n\r\n        <button type=\"submit\" className=\"bg-green-500 text-white p-2 w-full\">\r\n          Signup\r\n        </button>\r\n      </form>\r\n\r\n      {message && <p className=\"mt-2 text-red-500\">{message}</p>}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}