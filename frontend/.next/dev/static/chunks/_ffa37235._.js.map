{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/Quaantisc/Rentify/frontend/app/broker-signup/page.tsx"],"sourcesContent":["// \"use client\";\r\n\r\n// import { useState } from \"react\";\r\n// import { useAuthContext } from \"../context/AuthContext\";\r\n\r\n// export default function Signup() {\r\n//   const [name, setName] = useState(\"\");\r\n//   const [phoneNumber, setPhoneNumber] = useState(\"\");\r\n//   const [otp, setOtp] = useState(\"\");\r\n//   const [step, setStep] = useState<\"signup\" | \"verify\">(\"signup\");\r\n//   const { login } = useAuthContext();\r\n\r\n//   const baseUrl = process.env.NEXT_PUBLIC_BASE_URL || \"http://localhost:7000\";\r\n\r\n//   const handleSignup = async () => {\r\n//     const res = await fetch(`${baseUrl}/api/brokers/signup`, {\r\n//       method: \"POST\",\r\n//       headers: { \"Content-Type\": \"application/json\" },\r\n//       body: JSON.stringify({ name, phoneNumber }),\r\n//     });\r\n//     const data = await res.json();\r\n//     if (res.ok) setStep(\"verify\");\r\n//     else alert(data.message);\r\n//   };\r\n\r\n//   const handleVerifyOtp = async () => {\r\n//     const res = await fetch(`${baseUrl}/api/brokers/verifyOtp`, {\r\n//       method: \"POST\",\r\n//       headers: { \"Content-Type\": \"application/json\" },\r\n//       body: JSON.stringify({ phoneNumber, otp }),\r\n//     });\r\n//     const data = await res.json();\r\n//     if (res.ok) {\r\n//       // Save token in context\r\n//       login(\"demo-token\", { _id: \"demo\", name, phoneNumber }); // replace with real token & broker from API\r\n//     } else alert(data.message);\r\n//   };\r\n\r\n//   return (\r\n//     <div className=\"p-8 max-w-md mx-auto\">\r\n//       {step === \"signup\" ? (\r\n//         <>\r\n//           <h2 className=\"text-2xl font-bold mb-4\">Broker Signup</h2>\r\n//           <input placeholder=\"Name\" value={name} onChange={e => setName(e.target.value)} className=\"border p-2 w-full mb-2\"/>\r\n//           <input placeholder=\"Phone +91...\" value={phoneNumber} onChange={e => setPhoneNumber(e.target.value)} className=\"border p-2 w-full mb-2\"/>\r\n//           <button onClick={handleSignup} className=\"bg-blue-500 text-white p-2 w-full\">Send OTP</button>\r\n//         </>\r\n//       ) : (\r\n//         <>\r\n//           <h2 className=\"text-2xl font-bold mb-4\">Verify OTP</h2>\r\n//           <input placeholder=\"OTP\" value={otp} onChange={e => setOtp(e.target.value)} className=\"border p-2 w-full mb-2\"/>\r\n//           <button onClick={handleVerifyOtp} className=\"bg-green-500 text-white p-2 w-full\">Verify & Login</button>\r\n//         </>\r\n//       )}\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n\r\n\r\n\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\nexport default function BrokerSignup() {\r\n  const [step, setStep] = useState<\"phone\" | \"otp\">(\"phone\");\r\n  const [name, setName] = useState(\"\");\r\n  const [phoneNumber, setPhoneNumber] = useState(\"\");\r\n  const [serviceAreas, setServiceAreas] = useState<string[]>([]);\r\n  const [availableFlatTypes, setAvailableFlatTypes] = useState<string[]>([]);\r\n  const [address, setAddress] = useState(\"\");\r\n  const [otp, setOtp] = useState(\"\");\r\n  const [timer, setTimer] = useState(0);\r\n  const [canResend, setCanResend] = useState(true);\r\n  const [message, setMessage] = useState(\"\");\r\n\r\n  const router = useRouter();\r\n  const baseUrl = process.env.NEXT_PUBLIC_BASE_URL || \"http://localhost:7000\";\r\n\r\n  // Countdown timer for resend\r\n  useEffect(() => {\r\n    if (timer <= 0) return;\r\n    const interval = setInterval(() => setTimer(t => t - 1), 1000);\r\n    return () => clearInterval(interval);\r\n  }, [timer]);\r\n\r\n  useEffect(() => {\r\n    setCanResend(timer <= 0);\r\n  }, [timer]);\r\n\r\n  // Send OTP for signup\r\n  const sendOtp = async () => {\r\n    if (!name || !phoneNumber) return setMessage(\"Name and phone number required\");\r\n\r\n    try {\r\n      const res = await fetch(`${baseUrl}/signup/request-otp`, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ name, phoneNumber, serviceAreas, availableFlatTypes, address }),\r\n      });\r\n\r\n      const data = await res.json();\r\n      if (res.ok) {\r\n        setStep(\"otp\");\r\n        setTimer(30);\r\n        setMessage(\"OTP sent to your phone\");\r\n      } else setMessage(data.message);\r\n    } catch (err) {\r\n      console.error(err);\r\n      setMessage(\"Failed to send OTP\");\r\n    }\r\n  };\r\n\r\n  // Verify OTP and create broker\r\n  const verifyOtp = async () => {\r\n    try {\r\n      const res = await fetch(`${baseUrl}/signup/verify`, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ phoneNumber, otp }),\r\n      });\r\n\r\n      const data = await res.json();\r\n      if (res.ok) {\r\n        setMessage(\"Signup successful! You can now login.\");\r\n        setTimeout(() => router.push(\"/login\"), 1500);\r\n      } else setMessage(data.message);\r\n    } catch (err) {\r\n      console.error(err);\r\n      setMessage(\"Failed to verify OTP\");\r\n    }\r\n  };\r\n\r\n  // Change phone/number input\r\n  const changePhoneNumber = () => {\r\n    setStep(\"phone\");\r\n    setOtp(\"\");\r\n    setMessage(\"\");\r\n    setTimer(0);\r\n  };\r\n\r\n  // Handle comma-separated input for arrays\r\n  const handleServiceAreasChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setServiceAreas(e.target.value.split(\",\").map(s => s.trim()));\r\n  };\r\n\r\n  const handleFlatTypesChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setAvailableFlatTypes(e.target.value.split(\",\").map(s => s.trim()));\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-8 max-w-md mx-auto text-black bg-background\">\r\n      {step === \"phone\" ? (\r\n        <>\r\n          <h2 className=\"text-2xl font-bold mb-4\">Broker Signup</h2>\r\n          <input\r\n            placeholder=\"Name\"\r\n            value={name}\r\n            onChange={(e) => setName(e.target.value)}\r\n            className=\"border p-2 w-full mb-2 text-black bg-background\"\r\n          />\r\n          <input\r\n            placeholder=\"Phone +91...\"\r\n            value={phoneNumber}\r\n            onChange={(e) => setPhoneNumber(e.target.value)}\r\n            className=\"border p-2 w-full mb-2\"\r\n          />\r\n          <input\r\n            placeholder=\"Service Areas (comma separated)\"\r\n            value={serviceAreas.join(\", \")}\r\n            onChange={handleServiceAreasChange}\r\n            className=\"border p-2 w-full mb-2\"\r\n          />\r\n          <input\r\n            placeholder=\"Available Flat Types (comma separated)\"\r\n            value={availableFlatTypes.join(\", \")}\r\n            onChange={handleFlatTypesChange}\r\n            className=\"border p-2 w-full mb-2\"\r\n          />\r\n          <input\r\n            placeholder=\"Address\"\r\n            value={address}\r\n            onChange={(e) => setAddress(e.target.value)}\r\n            className=\"border p-2 w-full mb-2\"\r\n          />\r\n          <button\r\n            onClick={sendOtp}\r\n            className=\"bg-blue-500 text-white p-2 w-full\"\r\n          >\r\n            Send OTP\r\n          </button>\r\n        </>\r\n      ) : (\r\n        <>\r\n          <h2 className=\"text-2xl font-bold mb-4\">Enter OTP</h2>\r\n          <input\r\n            placeholder=\"OTP\"\r\n            value={otp}\r\n            onChange={(e) => setOtp(e.target.value)}\r\n            className=\"border p-2 w-full mb-2\"\r\n          />\r\n          <button\r\n            onClick={verifyOtp}\r\n            className=\"bg-green-500 text-white p-2 w-full mb-2\"\r\n          >\r\n            Verify & Signup\r\n          </button>\r\n\r\n          <button\r\n            onClick={changePhoneNumber}\r\n            className=\"bg-gray-300 p-2 w-full mb-2\"\r\n          >\r\n            Change Info\r\n          </button>\r\n\r\n          <button\r\n            onClick={sendOtp}\r\n            className={`p-2 w-full ${\r\n              canResend ? \"bg-blue-500 text-white\" : \"bg-gray-300 text-gray-600 cursor-not-allowed\"\r\n            }`}\r\n            disabled={!canResend}\r\n          >\r\n            {canResend ? \"Resend OTP\" : `Resend OTP in ${timer}s`}\r\n          </button>\r\n        </>\r\n      )}\r\n      {message && <p className=\"mt-2 text-red-500\">{message}</p>}\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 322, "column": 0}, "map": {"version":3,"sources":["file:///D:/Quaantisc/Rentify/frontend/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0]}}]
}